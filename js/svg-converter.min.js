$("document").ready(function(){svgconverter.init()});var svgconverter={svgs:{svg_ids:[],svg_data:[],add_svg:function(){}},init:function(){window.File&&window.FileReader&&window.FileList&&window.Blob||alert("The File APIs are not fully supported in this browser."),jQuery.event.props.push("dataTransfer");var e=$("body");e.bind("dragover",function(e){return e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy",$(this).addClass("over"),!1}),e.bind("dragleave",function(){return $(this).removeClass("over"),!1}),e.bind("drop",function(e){e.stopPropagation(),e.preventDefault(),$(this).removeClass("over");for(var a,r=e.dataTransfer.files,t=0;a=r[t];t++)if(a.type.match("image/svg")){var s=new FileReader;s.onload=function(e){return function(a){var r=e.name.substr(0,e.name.lastIndexOf("."));svgconverter.make_svg_element(a.target.result,r)}}(a),s.readAsText(a)}}),$("#options-form").on("submit",function(e){e.preventDefault();var a,r,t=$(this).serializeArray();jQuery.each(t,function(e,t){"encoding"===t.name&&(r=t.value),"format"===t.name&&(a=t.value)}),svgconverter.spitOutCss(r,a)})},make_svg_element:function(e,a){var r=$("<div />",{id:a,"class":"svg-icon-shell"});r.data("raw_svg_data",e),r.data("file_name",a);var t=$("#"+a);if(0==t.length){var s=$("<div />",{"class":"svg-icon"}),n=$('<a title="Remove Icon" class="remove-icon" href="#!"></a>').click(function(){$(this).parent().parent().remove()}),i=$('<div class="filename"><p>'+a+"</p></div>");svgconverter.create_css_str(e,"<uri></uri>"),s.css(svgconverter.create_css_str(e,"uri","object")),s.appendTo(r),i.appendTo(r),n.appendTo(r),r.appendTo("#data")}else $("#"+a+".svg-icon-shell").css(svgconverter.create_css_str(e,"uri","object"))},create_css_str:function(e,a,r){var t;return"uri"==a?t='url("data:image/svg+xml,'+svgconverter.create_escaped_data(e,"uri")+'")':"b64"==a&&(t='url("data:image/svg+xml;base64,'+svgconverter.create_escaped_data(e,"uri")+'")'),"object"==r?{"background-image":t}:"background-image: "+t+";"},create_escaped_data:function(e,a){var r;return"uri"==a?(r=encodeURIComponent(e),r=r.replace(/\(/g,"%28").replace(/\)/g,"%29")):"b64"==a&&(r=btoa(e)),r},spitOutCss:function(e,a){var r=$("#output");r.val(""),$("#data > .svg-icon-shell").each(function(){var t,s,n=$(this).data("raw_svg_data"),i=$(this).data("file_name");switch(t=svgconverter.create_escaped_data(n,e),a){case"css":s="."+i+'{background-image:url("data:image/svg+xml,'+t+'");}\n',s+=".no-svg ."+i+"{background-image:url(../PNG_DIRECTORY/"+i+".png)}";break;case"scss":s="."+i+'{background-image:url("data:image/svg+xml,'+t+'");}';break;case"less":s="."+i+'{background-image:url("data:image/svg+xml,'+t+'");}'}r.val(r.val()+"\n\n"+s)})},getCssOptions:function(){}};