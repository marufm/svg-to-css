$("document").ready(function(){svgconverter.init()});var svgconverter={svgs:{svg_ids:[],svg_data:[],add_svg:function(){}},init:function(){window.File&&window.FileReader&&window.FileList&&window.Blob||alert("The File APIs are not fully supported in this browser."),jQuery.event.props.push("dataTransfer");var e=$("body");e.bind("dragover",function(e){return e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy",$(this).addClass("over"),!1}),e.bind("dragleave",function(){return $(this).removeClass("over"),!1}),e.bind("drop",function(e){e.stopPropagation(),e.preventDefault(),$(this).removeClass("over");for(var a,n=$("#format-shell"),r=$("#outputs-shell"),t=e.dataTransfer.files,s=0;a=t[s];s++)if(a.type.match("image/svg")){var o=new FileReader;o.onload=function(e){return function(a){var n=e.name.substr(0,e.name.lastIndexOf("."));svgconverter.make_svg_element(a.target.result,n)}}(a),o.readAsText(a),0==s&&(r.addClass("shown"),n.addClass("shown"),$("body").addClass("iconed"))}}),$("#options-form").on("submit",function(e){e.preventDefault();var a,n,r=$(this).serializeArray();jQuery.each(r,function(e,r){"encoding"===r.name&&(n=r.value),"format"===r.name&&(a=r.value)}),svgconverter.spitOutCss(n,a)}),$("#btn_toggle_bgc").on("click",function(e){e.preventDefault(),$("body").toggleClass("inverted-colour")})},make_svg_element:function(e,a){var n=$("<div />",{id:a,"class":"svg-icon-shell"});n.data("raw_svg_data",e),n.data("file_name",a);var r=$("#"+a);if(0==r.length){{var t=$("<div />",{"class":"content-shell"}),s=$("<div />",{"class":"svg-icon"}),o=$('<a title="Remove Icon" class="remove-icon" href="#!">Remove</a>').click(function(){$(this).parent().parent().parent().remove()}),i=$('<div class="filename"><p>'+a+"</p></div>");svgconverter.create_css_str(e,"<uri></uri>")}s.append(e),s.appendTo(t),o.appendTo(i),i.appendTo(t),t.appendTo(n),n.appendTo("#data")}else{var d=$("#"+a+".svg-icon");d.html(e),d.data("raw_svg_data",e)}},create_css_str:function(e,a,n){var r;return"uri"==a?r='url("data:image/svg+xml,'+svgconverter.create_escaped_data(e,"uri")+'")':"b64"==a&&(r='url("data:image/svg+xml;base64,'+svgconverter.create_escaped_data(e,"uri")+'")'),"object"==n?{"background-image":r}:"background-image: "+r+";"},create_escaped_data:function(e,a){var n;return"uri"==a?(n=encodeURIComponent(e),n=n.replace(/\(/g,"%28").replace(/\)/g,"%29")):"b64"==a&&(n=btoa(e)),n},spitOutCss:function(e,a){var n=$("#output");n.val("");$("#data > .svg-icon-shell").each(function(){var r,t,s=$(this).data("raw_svg_data"),o=$(this).data("file_name");switch(r=svgconverter.create_escaped_data(s,e),a){case"css":t="."+o+'{background-image:url("data:image/svg+xml,'+r+'");\n',t+="background-repeat:no-repeat;}\n",t+=".no-svg ."+o+"{background-image:url(../PNG_DIRECTORY/"+o+".png);background-repeat:no-repeat;}\n";break;case"scss":t="@mixin "+o+'{background-image:url("data:image/svg+xml,'+r+'");\n',t+="background-repeat:no-repeat;\n",t+=".no-svg & {background-image:url(../IMAGE_DIRECTORY/"+o+".png);}\n}";break;case"less":t="."+o+'{background-image:url("data:image/svg+xml,'+r+'");\n',t+="background-repeat:no-repeat;\n",t+=".no-svg & {background-image:url(../IMAGE_DIRECTORY/"+o+".png);}\n}"}n.val(n.val()+"\n\n"+t)})},getCssOptions:function(){}};